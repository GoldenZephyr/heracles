---
name: Heracles CI
run-name: Heracles CI
on:
  push:
    branches: master
  pull_request:
    branches: [master, develop]
jobs:
  Heracles-CI:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository code
        uses: actions/checkout@v4
        with:
          path: heracles_repo
      - name: Lint
        run: |
          sudo apt-get update
          sudo apt install pipx
          pipx install pre-commit
          cd ${{github.workspace}}/heracles_repo
          pre-commit run --all-files
      - name: Install Heracles
        run: cd ${{ github.workspace }}/heracles_repo/heracles && pwd && pip install .
      - name: Run Neo4j
        run: docker run -d --publish=7474:7474 --publish=7687:7687 --env=NEO4J_AUTH=neo4j/neo4j_pw neo4j:5.25.1
      - name: Run test script
        run: sleep 20 && cd ${{ github.workspace }}/heracles_repo/heracles/tests && pytest
      #  run: sleep 20 && cd ${{ github.workspace }}/heracles_repo && python3 examples/dsg_test.py
      - run: echo "üçè This job's status is ${{ job.status }}."
